/* ==================== FEATURE PAGE REDESIGN ==================== */

/* Page Specific Background */
.page-feature {
    background-color: #F5F5F7;
    /* Apple-like light grey background */
}

/* Hero Adjustment */
.feature-hero {
    position: relative;
    isolation: isolate;
    background: #0b0f1a;
    padding-bottom: var(--space-3xl);
    min-height: 100vh;
    border-bottom: 1px solid rgba(255, 255, 255, 0.12);
    scroll-snap-align: start;
    /* Allow snapping to Hero */
}

.hero-video-bg {
    position: absolute;
    inset: 0;
    overflow: hidden;
    z-index: 0;
    pointer-events: none;
}

.hero-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    animation: heroSlowZoom 26s ease-in-out infinite alternate;
    filter: saturate(0.9) contrast(1.05);
}

.feature-hero .about-hero-container {
    position: relative;
    grid-template-columns: minmax(0, 1fr);
    z-index: 2;
}

.feature-hero .about-hero-content {
    animation: heroContentReveal 0.7s ease-out 0.1s both;
}

.feature-hero h1 {
    color: #ffffff;
    text-shadow: 0 10px 28px rgba(0, 0, 0, 0.45);
}

.feature-hero .about-hero-subheading {
    color: rgba(255, 255, 255, 0.82);
    text-shadow: 0 8px 22px rgba(0, 0, 0, 0.4);
}

.feature-hero .about-hero-cta .btn-secondary {
    color: rgba(255, 255, 255, 0.88);
    border-color: rgba(255, 255, 255, 0.35);
}

.feature-hero .about-hero-cta .btn-secondary:hover {
    color: var(--white);
    border-color: rgba(255, 255, 255, 0.6);
    background: rgba(255, 255, 255, 0.08);
}

/* Feature hero sizing + alignment overrides */
.page-feature .feature-hero .about-hero-container {
    max-width: 1600px;
}

.page-feature .feature-hero .about-hero-content {
    max-width: 1000px;
    width: 100%;
    margin: 0 auto;
    text-align: center;
}

.page-feature .feature-hero h1 {
    font-size: clamp(2.6rem, 4vw + 1rem, 4.2rem);
    line-height: 1.08;
}

.page-feature .feature-hero .about-hero-subheading {
    font-size: clamp(1.1rem, 1.2vw + 0.8rem, 1.5rem);
}

.page-feature .feature-hero .about-hero-cta {
    justify-content: center;
}

@keyframes heroContentReveal {
    from {
        opacity: 0;
        transform: translateY(12px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes heroSlowZoom {
    from {
        transform: scale(1.02);
    }
    to {
        transform: scale(1.06);
    }
}

@media (prefers-reduced-motion: reduce) {
    .hero-video {
        animation: none;
        transform: scale(1.02);
    }

    .feature-hero .about-hero-content {
        animation: none;
        opacity: 1;
        transform: none;
    }
}

/* Ensure other main sections snap too */
.final-cta-section,
.legal-footer {
    scroll-snap-align: start;
}

.final-cta-section {
    scroll-snap-stop: always;
}

.page-feature .final-cta-section {
    min-height: calc(100vh - 15rem);
    padding: clamp(6rem, 12vh, 9rem) var(--space-xl);
}

.page-feature .legal-footer {
    margin-top: 0;
}

/* Main Container */
.feature-showcase-container {
    display: flex;
    position: relative;
    max-width: 1440px;
    margin: 0 auto;
    /* This container holds both the sticky phone and the scrolling text */
}

/* Left Column: Sticky Phone */
.sticky-phone-wrapper {
    width: 50%;
    height: 100vh;
    position: sticky;
    top: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #F5F5F7;
    z-index: 10;
    padding: var(--space-xl);
    overflow: hidden;
    /* Prevent phone from overflowing if screen is small */
}

/* Right Column: Scrollable Content */
.scrollable-content-wrapper {
    width: 50%;
    /* To enable scroll snapping, this container needs to handle the scroll, 
       but currently the whole page scrolls. 
       For the split screen effect where the left is sticky, the parent container usually scrolls.
       Let's apply snap to the parent if we want the whole page to snap, 
       OR make the right side independently scrollable (which might be weird if left is sticky).
       
       Actually, for a standard sticky layout, the BODY/HTML scrolls. 
       So we should apply scroll-snap-type to HTML/BODY or a main wrapper.
    */
}

/* Let's apply snapping to the main container if it's the one scrolling, 
   but usually it's the window. So we apply to html. */
html {
    scroll-snap-type: y mandatory;
}

/* Individual Feature Section */
.feature-section {
    height: 100vh;
    /* Full viewport height for snap effect */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-3xl);
    scroll-snap-align: start;
    /* Snap to top */
    scroll-snap-stop: always;
    /* Force stop at each section */
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    /* Subtle separator */
}

.feature-text-content {
    max-width: 480px;
    opacity: 0.4;
    /* Dimmed by default */
    transform: translateY(20px);
    transition: all 0.6s ease-out;
}

/* Active State for Text (Triggered by JS) */
.feature-section.active .feature-text-content {
    opacity: 1;
    transform: translateY(0);
}

.feature-text-content h2 {
    font-family: var(--font-display);
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--slate-900);
    margin-bottom: var(--space-md);
    line-height: 1.2;
}

.feature-text-content p {
    font-size: 1.125rem;
    color: var(--slate-600);
    line-height: 1.7;
    margin-bottom: var(--space-lg);
}

.feature-tags {
    display: flex;
    gap: var(--space-sm);
    flex-wrap: wrap;
}

.tag {
    background: var(--white);
    border: 1px solid var(--slate-200);
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--slate-600);
    box-shadow: var(--shadow-sm);
}

/* ==================== IPHONE MOCKUP STYLES ==================== */

.iphone-frame-container {
    position: relative;
    width: min(360px, 80vw);
    aspect-ratio: 1015/2048;
    height: auto;
    max-height: 90vh;
    transform: translateX(-50px);
    --screen-inset-top: 7%;
    --screen-inset-right: 6%;
    --screen-inset-bottom: 4%;
    --screen-inset-left: 6%;
    --screen-radius: 8%;
    --frame-inset-top: 2%;
    --frame-inset-right: 3.7%;
    --frame-inset-bottom: 2%;
    --frame-inset-left: 4.2%;
    --frame-radius-x: 16.8%;
    --frame-radius-y: 9.4%;
    border-radius: 0;
    background: transparent;
    overflow: visible;
}

.iphone-frame-container::before {
    content: "";
    position: absolute;
    top: var(--frame-inset-top);
    right: var(--frame-inset-right);
    bottom: var(--frame-inset-bottom);
    left: var(--frame-inset-left);
    border-radius: var(--frame-radius-x) / var(--frame-radius-y);
    box-shadow: 0 24px 60px -20px rgba(0, 0, 0, 0.35);
    z-index: 0;
    pointer-events: none;
}

.iphone-bg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    z-index: 3;
    pointer-events: none;
    display: block;
}

.iphone-screen {
    position: absolute;
    top: var(--screen-inset-top);
    right: var(--screen-inset-right);
    bottom: var(--screen-inset-bottom);
    left: var(--screen-inset-left);
    background: #FFFFFF;
    z-index: 1;
    display: flex;
    flex-direction: column;
    font-family: "SF Pro Text", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    border-radius: var(--screen-radius);
    overflow: hidden;
}

/* Header */
.screen-header {
    height: 110px;
    background: rgba(245, 245, 247, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    padding-bottom: 10px;
    position: relative;
    z-index: 10;
}

.header-avatar img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-bottom: 4px;
}

.header-info {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    color: #000;
    font-weight: 500;
}

.header-arrow {
    font-size: 10px;
    color: #8E8E93;
    margin-left: 2px;
}

/* Chat Area */
.chat-scroll-area {
    flex: 1;
    background: #FFFFFF;
    padding: 20px 16px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
    scroll-behavior: smooth;
}

/* Message Bubbles */
.message-bubble {
    max-width: 75%;
    padding: 10px 16px;
    border-radius: 18px;
    font-size: 14px;
    line-height: 1.4;
    position: relative;
    opacity: 0;
    transform: translateY(10px);
    animation: messageEnter 0.3s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

@keyframes messageEnter {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.message-bubble.user {
    align-self: flex-end;
    background-color: #007AFF;
    /* iMessage Blue */
    color: white;
    border-bottom-right-radius: 4px;
}

.message-bubble.bot {
    align-self: flex-start;
    background-color: #E9E9EB;
    /* iMessage Grey */
    color: black;
    border-bottom-left-radius: 4px;
}

/* Input Area */
.input-area {
    min-height: 60px;
    background: #F5F5F7;
    /* Light grey bar */
    padding: 10px 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    position: relative;
    z-index: 10;
}

.attach-btn {
    width: 22px;
    height: 22px;
    background: #E5E5EA;
    border-radius: 50%;
    border: none;
    color: #6E6E73;
    font-size: 22px;
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.1s;
}

.attach-btn:active {
    transform: scale(0.92);
}

.input-field-wrapper {
    flex: 1;
    min-height: 36px;
    background: #FFFFFF;
    border: 1px solid #E5E5EA;
    border-radius: 18px;
    padding: 6px 44px 6px 12px;
    display: flex;
    align-items: center;
    position: relative;
    box-sizing: border-box;
}

#phone-input {
    width: 100%;
    border: none;
    outline: none;
    font-size: 14px;
    color: #000;
    background: transparent;
    padding: 0;
    margin: 0;
    line-height: 1.4;
    resize: none;
    overflow: hidden;
    min-height: 20px;
    font-family: inherit;
}

.send-btn {
    width: 22px;
    height: 22px;
    background: #007AFF;
    border-radius: 50%;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.1s;
    position: absolute;
    right: 6px;
    top: 50%;
    transform: translateY(-50%);
}

.send-btn:active {
    transform: translateY(-50%) scale(0.9);
}

.send-btn svg {
    width: 14px;
    height: 14px;
    margin-top: 2px;
    /* Visual adjustment */
}

/* ==================== MANIFESTO SECTION ==================== */
.manifesto-section {
    min-height: 100vh;
    padding: clamp(5rem, 10vh, 8rem) var(--space-xl);
    background: linear-gradient(180deg, var(--slate-50) 0%, var(--white) 100%);
    border-top: 1px solid var(--slate-200);
    scroll-snap-align: start;
    scroll-snap-stop: always;
    display: flex;
    align-items: center;
    justify-content: center;
}

.manifesto-container {
    max-width: 720px;
    margin: 0 auto;
    width: 100%;
    position: relative;
}

/* Decorative opening quote */
.manifesto-container::before {
    content: '"';
    position: absolute;
    top: -2rem;
    left: -2rem;
    font-size: 8rem;
    font-family: Georgia, serif;
    color: var(--blue-100);
    line-height: 1;
    z-index: 0;
    opacity: 0.5;
}

.manifesto-title {
    font-size: clamp(2.25rem, 5vw, 3.5rem);
    font-weight: 700;
    text-align: center;
    margin-bottom: clamp(2.5rem, 5vh, 4rem);
    color: var(--slate-900);
    position: relative;
    z-index: 1;
}

.manifesto-letter {
    font-size: clamp(1.1rem, 1.5vw, 1.25rem);
    line-height: 1.9;
    color: var(--slate-700);
    position: relative;
    z-index: 1;
}

.manifesto-letter p {
    margin-bottom: 1.5em;
}

.manifesto-letter p:last-child {
    margin-bottom: 0;
}

/* Drop cap on first paragraph */
.manifesto-letter p:first-of-type::first-letter {
    font-size: 3.5em;
    float: left;
    line-height: 0.8;
    padding-right: 0.1em;
    color: var(--blue-600);
    font-weight: 700;
}

.manifesto-signature {
    font-weight: 600;
    font-style: italic;
    color: var(--slate-900);
    margin-top: 2.5em !important;
    padding-top: 1.5em;
    border-top: 2px solid var(--blue-500);
    display: inline-block;
}

/* ==================== SECURITY & PRIVACY SECTION (Legacy) ==================== */
.security-privacy-section {
    min-height: 100vh;
    padding: clamp(5rem, 10vh, 8rem) var(--space-xl);
    background: var(--white);
    border-top: 1px solid var(--slate-200);
    scroll-snap-align: start;
    scroll-snap-stop: always;
    display: flex;
    align-items: center;
}

.security-privacy-container {
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
}

.security-privacy-section .section-header {
    margin-bottom: var(--space-3xl);
}

.security-privacy-section .section-header h2 {
    font-size: clamp(2.4rem, 4vw, 3.25rem);
}

.security-privacy-section .section-subtitle {
    font-size: clamp(0.9rem, 1.26vw, 1.125rem);
    max-width: 720px;
    margin: 0 auto;
}

.security-privacy-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: clamp(1.5rem, 3vw, 2.75rem);
    align-items: stretch;
}

.security-card {
    --security-icon-offset: clamp(1.5rem, 3vw, 2.5rem);
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    padding: clamp(2.5rem, 3.2vw, 3.5rem);
    padding-left: 25%;
    position: relative;
    overflow: hidden;
    min-height: clamp(20rem, 38vh, 28rem);
}

.security-card-icon {
    position: absolute;
    top: 50%;
    left: var(--security-icon-offset);
    height: var(--security-icon-height, 60%);
    width: auto;
    aspect-ratio: var(--security-icon-ratio, 1 / 1);
    transform: translateY(-50%);
    pointer-events: none;
    z-index: 0;
    -webkit-mask-image: linear-gradient(90deg, #000 0%, #000 45%, rgba(0, 0, 0, 0.35) 70%, transparent 100%);
    mask-image: linear-gradient(90deg, #000 0%, #000 45%, rgba(0, 0, 0, 0.35) 70%, transparent 100%);
}

.security-card-icon--lock {
    --security-icon-height: 80%;
    --security-icon-ratio: 48.847626 / 30;
}

.security-card-icon--no-training {
    --security-icon-height: 60%;
    --security-icon-ratio: 74.277344 / 19.507812;
    -webkit-mask-image: linear-gradient(90deg, #000 0%, #000 35%, rgba(0, 0, 0, 0.35) 70%, transparent 100%);
    mask-image: linear-gradient(90deg, #000 0%, #000 3zu5%, rgba(0, 0, 0, 0.35) 70%, transparent 100%);
}

.security-card-icon-mark {
    width: 100%;
    height: 100%;
    background-color: rgba(59, 130, 246, 0.25);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
    -webkit-mask-size: contain;
    mask-size: contain;
}

.security-card-icon-mark--lock {
    -webkit-mask-image: url("/assets/homepage/lock-data.svg");
    mask-image: url("/assets/homepage/lock-data.svg");
}

.security-card-icon-mark--no-training {
    -webkit-mask-image: url("/assets/homepage/no-model-training.svg");
    mask-image: url("/assets/homepage/no-model-training.svg");
}

.security-card h3 {
    font-size: clamp(1.75rem, 2.6vw, 2.4rem);
    position: relative;
    z-index: 1;
    margin: 0;
}

.security-card p {
    font-size: clamp(0.918rem, 1.26vw, 1.08rem);
    line-height: 1.75;
    color: var(--slate-600);
    margin: 0;
    position: relative;
    z-index: 1;
}

.security-card-link {
    color: var(--blue-600);
    text-decoration: underline;
    text-underline-offset: 2px;
}

.security-card.fade-in-element {
    opacity: 0;
    transform: translateX(var(--security-offset, 0));
    transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1), box-shadow var(--transition-base);
}

.security-card.fade-in-element.visible {
    opacity: 1;
    transform: translateX(0);
}

.security-card[data-direction="left"] {
    --security-offset: -28px;
}

.security-card[data-direction="right"] {
    --security-offset: 28px;
}

/* ==================== RESPONSIVE ==================== */
@media (max-width: 900px) {
    .feature-showcase-container {
        flex-direction: column;
    }

    .sticky-phone-wrapper {
        width: 100%;
        height: auto;
        min-height: 100svh;
        min-height: 100dvh;
        position: relative;
        padding: var(--space-2xl) 0;
        background: #F5F5F7;
        scroll-snap-align: start;
        scroll-snap-stop: always;
    }

    .iphone-frame-container {
        width: min(320px, 85vw);
        margin: 0 auto;
        transform: none;
    }

    .scrollable-content-wrapper {
        width: 100%;
    }

    .feature-section {
        height: auto;
        min-height: 100svh;
        min-height: 100dvh;
        padding: var(--space-xl) var(--space-md);
        text-align: center;
        scroll-snap-align: start;
        scroll-snap-stop: always;
    }

    .feature-text-content {
        opacity: 1;
        transform: none;
    }

    .feature-tags {
        justify-content: center;
    }

    .security-privacy-section {
        padding: var(--space-2xl) var(--space-md);
    }

    .security-privacy-grid {
        grid-template-columns: 1fr;
    }

    .security-card {
        --security-icon-offset: clamp(1.25rem, 2.8vw, 2rem);
    }
}

@media (max-width: 768px) {
    .feature-hero {
        min-height: 100svh;
        min-height: 100dvh;
    }

    .hero-video {
        object-position: center center;
    }
}
