/* ==================== FEATURE PAGE REDESIGN ==================== */

/* Page Specific Background */
.page-feature {
    background-color: #F5F5F7;
    /* Apple-like light grey background */
}

/* Hero Adjustment */
.feature-hero {
    position: relative;
    isolation: isolate;
    background: #0b0f1a;
    padding-bottom: var(--space-3xl);
    min-height: 100vh;
    border-bottom: 1px solid rgba(255, 255, 255, 0.12);
    scroll-snap-align: start;
    /* Allow snapping to Hero */
}

.hero-video-bg {
    position: absolute;
    inset: 0;
    overflow: hidden;
    z-index: 0;
    pointer-events: none;
}

.hero-video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    animation: heroSlowZoom 26s ease-in-out infinite alternate;
    filter: saturate(0.9) contrast(1.05);
}

.feature-hero .about-hero-container {
    position: relative;
    grid-template-columns: minmax(0, 1fr);
    z-index: 2;
}

.feature-hero .about-hero-content {
    animation: heroContentReveal 0.7s ease-out 0.1s both;
}

.feature-hero h1 {
    color: #ffffff;
    text-shadow: 0 10px 28px rgba(0, 0, 0, 0.45);
}

.feature-hero .about-hero-subheading {
    color: rgba(255, 255, 255, 0.82);
    text-shadow: 0 8px 22px rgba(0, 0, 0, 0.4);
}

.feature-hero .about-hero-cta .btn-secondary {
    color: rgba(255, 255, 255, 0.88);
    border-color: rgba(255, 255, 255, 0.35);
}

.feature-hero .about-hero-cta .btn-secondary:hover {
    color: var(--white);
    border-color: rgba(255, 255, 255, 0.6);
    background: rgba(255, 255, 255, 0.08);
}

/* Feature hero sizing + alignment overrides */
.page-feature .feature-hero .about-hero-container {
    max-width: 1600px;
}

.page-feature .feature-hero .about-hero-content {
    max-width: 1000px;
    width: 100%;
    margin: 0 auto;
    text-align: center;
}

.page-feature .feature-hero h1 {
    font-size: clamp(2.6rem, 4vw + 1rem, 4.2rem);
    line-height: 1.08;
}

.page-feature .feature-hero .about-hero-subheading {
    font-size: clamp(1.1rem, 1.2vw + 0.8rem, 1.5rem);
}

.page-feature .feature-hero .about-hero-cta {
    justify-content: center;
}

@keyframes heroContentReveal {
    from {
        opacity: 0;
        transform: translateY(12px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes heroSlowZoom {
    from {
        transform: scale(1.02);
    }
    to {
        transform: scale(1.06);
    }
}

@media (prefers-reduced-motion: reduce) {
    .hero-video {
        animation: none;
        transform: scale(1.02);
    }

    .feature-hero .about-hero-content {
        animation: none;
        opacity: 1;
        transform: none;
    }
}

/* Ensure other main sections snap too */
.final-cta-section,
.legal-footer {
    scroll-snap-align: start;
}

.final-cta-section {
    scroll-snap-stop: always;
}

.page-feature .final-cta-section {
    min-height: calc(100vh - 15rem);
    padding: clamp(6rem, 12vh, 9rem) var(--space-xl);
}

.page-feature .legal-footer {
    margin-top: 0;
}

/* Main Container */
.feature-showcase-container {
    display: flex;
    position: relative;
    max-width: 1440px;
    margin: 0 auto;
    /* This container holds both the sticky phone and the scrolling text */
}

/* Left Column: Sticky Phone */
.sticky-phone-wrapper {
    width: 50%;
    height: 100vh;
    position: sticky;
    top: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #F5F5F7;
    z-index: 10;
    padding: var(--space-xl);
    overflow: hidden;
    /* Prevent phone from overflowing if screen is small */
}

/* Right Column: Scrollable Content */
.scrollable-content-wrapper {
    width: 50%;
    /* To enable scroll snapping, this container needs to handle the scroll, 
       but currently the whole page scrolls. 
       For the split screen effect where the left is sticky, the parent container usually scrolls.
       Let's apply snap to the parent if we want the whole page to snap, 
       OR make the right side independently scrollable (which might be weird if left is sticky).
       
       Actually, for a standard sticky layout, the BODY/HTML scrolls. 
       So we should apply scroll-snap-type to HTML/BODY or a main wrapper.
    */
}

/* Let's apply snapping to the main container if it's the one scrolling, 
   but usually it's the window. So we apply to html. */
html {
    scroll-snap-type: y mandatory;
}

/* Individual Feature Section */
.feature-section {
    height: 100vh;
    /* Full viewport height for snap effect */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-3xl);
    scroll-snap-align: start;
    /* Snap to top */
    scroll-snap-stop: always;
    /* Force stop at each section */
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    /* Subtle separator */
}

.feature-text-content {
    max-width: 480px;
    opacity: 0.4;
    /* Dimmed by default */
    transform: translateY(20px);
    transition: all 0.6s ease-out;
}

/* Active State for Text (Triggered by JS) */
.feature-section.active .feature-text-content {
    opacity: 1;
    transform: translateY(0);
}

.feature-text-content h2 {
    font-family: var(--font-display);
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--slate-900);
    margin-bottom: var(--space-md);
    line-height: 1.2;
}

.feature-text-content p {
    font-size: 1.125rem;
    color: var(--slate-600);
    line-height: 1.7;
    margin-bottom: var(--space-lg);
}

.feature-tags {
    display: flex;
    gap: var(--space-sm);
    flex-wrap: wrap;
}

.tag {
    background: var(--white);
    border: 1px solid var(--slate-200);
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--slate-600);
    box-shadow: var(--shadow-sm);
}

/* ==================== IPHONE MOCKUP STYLES ==================== */

.iphone-frame-container {
    position: relative;
    width: min(360px, 80vw);
    aspect-ratio: 1015/2048;
    height: auto;
    max-height: 90vh;
    transform: translateX(-50px);
    --screen-inset-top: 7%;
    --screen-inset-right: 6%;
    --screen-inset-bottom: 4%;
    --screen-inset-left: 6%;
    --screen-radius: 8%;
    --frame-inset-top: 2%;
    --frame-inset-right: 3.7%;
    --frame-inset-bottom: 2%;
    --frame-inset-left: 4.2%;
    --frame-radius-x: 16.8%;
    --frame-radius-y: 9.4%;
    border-radius: 0;
    background: transparent;
    overflow: visible;
}

.iphone-frame-container::before {
    content: "";
    position: absolute;
    top: var(--frame-inset-top);
    right: var(--frame-inset-right);
    bottom: var(--frame-inset-bottom);
    left: var(--frame-inset-left);
    border-radius: var(--frame-radius-x) / var(--frame-radius-y);
    box-shadow: 0 24px 60px -20px rgba(0, 0, 0, 0.35);
    z-index: 0;
    pointer-events: none;
}

.iphone-bg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    z-index: 3;
    pointer-events: none;
    display: block;
}

.iphone-screen {
    position: absolute;
    top: var(--screen-inset-top);
    right: var(--screen-inset-right);
    bottom: var(--screen-inset-bottom);
    left: var(--screen-inset-left);
    background: #FFFFFF;
    z-index: 1;
    display: flex;
    flex-direction: column;
    font-family: "SF Pro Text", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    border-radius: var(--screen-radius);
    overflow: hidden;
}

/* Header */
.screen-header {
    height: 110px;
    background: rgba(245, 245, 247, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    padding-bottom: 10px;
    position: relative;
    z-index: 10;
}

.header-avatar img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-bottom: 4px;
}

.header-info {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    color: #000;
    font-weight: 500;
}

.header-arrow {
    font-size: 10px;
    color: #8E8E93;
    margin-left: 2px;
}

/* Chat Area */
.chat-scroll-area {
    flex: 1;
    background: #FFFFFF;
    padding: 20px 16px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
    scroll-behavior: smooth;
}

/* Message Bubbles */
.message-bubble {
    max-width: 75%;
    padding: 10px 16px;
    border-radius: 18px;
    font-size: 14px;
    line-height: 1.4;
    position: relative;
    opacity: 0;
    transform: translateY(10px);
    animation: messageEnter 0.3s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

@keyframes messageEnter {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.message-bubble.user {
    align-self: flex-end;
    background-color: #007AFF;
    /* iMessage Blue */
    color: white;
    border-bottom-right-radius: 4px;
}

.message-bubble.bot {
    align-self: flex-start;
    background-color: #E9E9EB;
    /* iMessage Grey */
    color: black;
    border-bottom-left-radius: 4px;
}

/* Input Area */
.input-area {
    min-height: 60px;
    background: #F5F5F7;
    /* Light grey bar */
    padding: 10px 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    position: relative;
    z-index: 10;
}

.attach-btn {
    width: 22px;
    height: 22px;
    background: #E5E5EA;
    border-radius: 50%;
    border: none;
    color: #6E6E73;
    font-size: 22px;
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.1s;
}

.attach-btn:active {
    transform: scale(0.92);
}

.input-field-wrapper {
    flex: 1;
    min-height: 36px;
    background: #FFFFFF;
    border: 1px solid #E5E5EA;
    border-radius: 18px;
    padding: 6px 44px 6px 12px;
    display: flex;
    align-items: center;
    position: relative;
    box-sizing: border-box;
}

#phone-input {
    width: 100%;
    border: none;
    outline: none;
    font-size: 14px;
    color: #000;
    background: transparent;
    padding: 0;
    margin: 0;
    line-height: 1.4;
    resize: none;
    overflow: hidden;
    min-height: 20px;
    font-family: inherit;
}

.send-btn {
    width: 22px;
    height: 22px;
    background: #007AFF;
    border-radius: 50%;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.1s;
    position: absolute;
    right: 6px;
    top: 50%;
    transform: translateY(-50%);
}

.send-btn:active {
    transform: translateY(-50%) scale(0.9);
}

.send-btn svg {
    width: 14px;
    height: 14px;
    margin-top: 2px;
    /* Visual adjustment */
}

/* ==================== MANIFESTO SECTION ==================== */
.manifesto-section {
    min-height: 100vh;
    padding: clamp(5rem, 10vh, 8rem) var(--space-xl);
    background: linear-gradient(180deg, var(--slate-50) 0%, var(--white) 100%);
    border-top: 1px solid var(--slate-200);
    scroll-snap-align: start;
    scroll-snap-stop: always;
    display: flex;
    align-items: center;
    justify-content: center;
}

.manifesto-container {
    max-width: 720px;
    margin: 0 auto;
    width: 100%;
    position: relative;
}

/* Decorative opening quote */
.manifesto-container::before {
    content: '"';
    position: absolute;
    top: -2rem;
    left: -2rem;
    font-size: 8rem;
    font-family: Georgia, serif;
    color: var(--blue-100);
    line-height: 1;
    z-index: 0;
    opacity: 0.5;
}

.manifesto-title {
    font-size: clamp(2.25rem, 5vw, 3.5rem);
    font-weight: 700;
    text-align: center;
    margin-bottom: clamp(2.5rem, 5vh, 4rem);
    color: var(--slate-900);
    position: relative;
    z-index: 1;
}

.manifesto-letter {
    font-size: clamp(1.1rem, 1.5vw, 1.25rem);
    line-height: 1.9;
    color: var(--slate-700);
    position: relative;
    z-index: 1;
}

.manifesto-letter p {
    margin-bottom: 1.5em;
}

.manifesto-letter p:last-child {
    margin-bottom: 0;
}

/* Drop cap on first paragraph */
.manifesto-letter p:first-of-type::first-letter {
    font-size: 3.5em;
    float: left;
    line-height: 0.8;
    padding-right: 0.1em;
    color: var(--blue-600);
    font-weight: 700;
}

.manifesto-signature {
    font-weight: 600;
    font-style: italic;
    color: var(--slate-900);
    margin-top: 2.5em !important;
    padding-top: 1.5em;
    border-top: 2px solid var(--blue-500);
    display: inline-block;
}

/* ==================== SECURITY & PRIVACY SECTION (Legacy) ==================== */
.security-privacy-section {
    min-height: 100vh;
    padding: clamp(5rem, 10vh, 8rem) var(--space-xl);
    background: var(--white);
    border-top: 1px solid var(--slate-200);
    scroll-snap-align: start;
    scroll-snap-stop: always;
    display: flex;
    align-items: center;
}

.security-privacy-container {
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
}

.security-privacy-section .section-header {
    margin-bottom: var(--space-3xl);
}

.security-privacy-section .section-header h2 {
    font-size: clamp(2.4rem, 4vw, 3.25rem);
}

.security-privacy-section .section-subtitle {
    font-size: clamp(0.9rem, 1.26vw, 1.125rem);
    max-width: 720px;
    margin: 0 auto;
}

.security-privacy-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: clamp(1.5rem, 3vw, 2.75rem);
    align-items: stretch;
}

.security-card {
    --security-icon-offset: clamp(1.5rem, 3vw, 2.5rem);
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    padding: clamp(2.5rem, 3.2vw, 3.5rem);
    padding-left: 25%;
    position: relative;
    overflow: hidden;
    min-height: clamp(20rem, 38vh, 28rem);
}

.security-card-icon {
    position: absolute;
    top: 50%;
    left: var(--security-icon-offset);
    height: var(--security-icon-height, 60%);
    width: auto;
    aspect-ratio: var(--security-icon-ratio, 1 / 1);
    transform: translateY(-50%);
    pointer-events: none;
    z-index: 0;
    -webkit-mask-image: linear-gradient(90deg, #000 0%, #000 45%, rgba(0, 0, 0, 0.35) 70%, transparent 100%);
    mask-image: linear-gradient(90deg, #000 0%, #000 45%, rgba(0, 0, 0, 0.35) 70%, transparent 100%);
}

.security-card-icon--lock {
    --security-icon-height: 80%;
    --security-icon-ratio: 48.847626 / 30;
}

.security-card-icon--no-training {
    --security-icon-height: 60%;
    --security-icon-ratio: 74.277344 / 19.507812;
    -webkit-mask-image: linear-gradient(90deg, #000 0%, #000 35%, rgba(0, 0, 0, 0.35) 70%, transparent 100%);
    mask-image: linear-gradient(90deg, #000 0%, #000 35%, rgba(0, 0, 0, 0.35) 70%, transparent 100%);
}

.security-card-icon-mark {
    width: 100%;
    height: 100%;
    background-color: rgba(59, 130, 246, 0.25);
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
    -webkit-mask-size: contain;
    mask-size: contain;
}

.security-card-icon-mark--lock {
    -webkit-mask-image: url("/assets/homepage/lock-data.svg");
    mask-image: url("/assets/homepage/lock-data.svg");
}

.security-card-icon-mark--no-training {
    -webkit-mask-image: url("/assets/homepage/no-model-training.svg");
    mask-image: url("/assets/homepage/no-model-training.svg");
}

.security-card h3 {
    font-size: clamp(1.75rem, 2.6vw, 2.4rem);
    position: relative;
    z-index: 1;
    margin: 0;
}

.security-card p {
    font-size: clamp(0.918rem, 1.26vw, 1.08rem);
    line-height: 1.75;
    color: var(--slate-600);
    margin: 0;
    position: relative;
    z-index: 1;
}

.security-card-link {
    color: var(--blue-600);
    text-decoration: underline;
    text-underline-offset: 2px;
}

.security-card.fade-in-element {
    opacity: 0;
    transform: translateX(var(--security-offset, 0));
    transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1), box-shadow var(--transition-base);
}

.security-card.fade-in-element.visible {
    opacity: 1;
    transform: translateX(0);
}

.security-card[data-direction="left"] {
    --security-offset: -28px;
}

.security-card[data-direction="right"] {
    --security-offset: 28px;
}

/* ==================== RESPONSIVE ==================== */
@media (max-width: 900px) {
    html {
        scroll-snap-type: y proximity;
    }

    .feature-showcase-container {
        flex-direction: column;
    }

    .sticky-phone-wrapper {
        width: 100%;
        height: auto;
        position: sticky;
        top: var(--nav-bottom);
        padding: var(--space-lg) 0;
        background: #F5F5F7;
        z-index: 10;
    }

    .scrollable-content-wrapper {
        width: 100%;
    }

    .feature-section {
        height: auto;
        min-height: auto;
        padding: var(--space-2xl) var(--space-md);
        text-align: center;
        scroll-snap-align: start;
        scroll-snap-stop: normal;
    }

    /* .feature-text-content inherits desktop dimming effect */

    .feature-tags {
        justify-content: center;
    }

    .security-privacy-section {
        padding: var(--space-2xl) var(--space-md);
    }

    .security-privacy-grid {
        grid-template-columns: 1fr;
    }

    .security-card {
        --security-icon-offset: clamp(1.25rem, 2.8vw, 2rem);
    }
}

@media (max-width: 768px) {
    .feature-hero {
        min-height: 100svh;
        min-height: 100dvh;
    }

    .hero-video {
        object-position: center center;
    }
}

@media (max-width: 600px) {
    /*
     * Use 'proximity' instead of 'mandatory' on mobile to handle
     * dynamic viewport height changes when the browser address bar
     * hides/shows during scrolling. Mandatory snapping causes jarring
     * jumps when the viewport resizes mid-scroll.
     */
    html {
        scroll-snap-type: y proximity;
    }

    .iphone-frame-container {
        width: min(320px, 80vw, 30vh);
        max-height: none;
        margin: 0 auto;
        transform: none;
    }

    .iphone-frame-container::before {
        box-shadow: none;
    }

    .sticky-phone-wrapper {
        background: #F5F5F7;
        opacity: 1;
        padding: var(--space-sm) 0;
    }

    .message-bubble {
        font-size: 12px;
        padding: 6px 9px;
    }

    .screen-header {
        height: 60px;
    }

    .input-area {
        min-height: 42px;
    }

    #phone-input {
        font-size: 12px;
    }

    .header-info {
        display: none;
    }

    .header-avatar img {
        width: 35px;
        height: 35px;
    }

    /*
     * Use min-height with dvh (dynamic viewport height) so sections
     * adapt when address bar hides/shows. Combined with proximity
     * snapping, this prevents jarring snap corrections.
     */
    .feature-section {
        height: auto;
        min-height: 100svh; /* Fallback for older browsers */
        min-height: 100dvh; /* Dynamic - adapts to address bar */
        scroll-snap-stop: normal;
        align-items: flex-end;
        padding: var(--space-md) var(--space-md);
    }

    .feature-text-content h2 {
        font-size: 1.6rem;
    }

    .feature-text-content p {
        font-size: 0.8rem;
    }

}

/* ==================== CONTEXT WEB VISUALIZATION ==================== */
/* Premium Editorial Aesthetic */

.context-web-section {
    min-height: 100vh;
    min-height: 100svh;
    position: relative;
    background: #FFFFFF;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    scroll-snap-align: start;
    scroll-snap-stop: always;
    padding: clamp(4rem, 8vh, 6rem) var(--space-xl);
}

/* Subtle editorial accent line */
.context-web-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 1px;
    height: 80px;
    background: linear-gradient(to bottom, transparent, #E2E8F0);
}

.context-web-container {
    width: 100%;
    max-width: 1100px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: clamp(3rem, 6vh, 5rem);
    position: relative;
    z-index: 1;
}

/* Section Header - Editorial Typography */
.context-web-header {
    text-align: center;
    max-width: 680px;
    opacity: 0;
    transform: translateY(24px);
    transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1), transform 1s cubic-bezier(0.16, 1, 0.3, 1);
}

.context-web-section.in-view .context-web-header {
    opacity: 1;
    transform: translateY(0);
}

.context-web-title {
    font-family: var(--font-display);
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 600;
    color: #0F172A;
    margin-bottom: var(--space-lg);
    letter-spacing: -0.035em;
    line-height: 1.1;
}

.context-web-subtitle {
    font-size: clamp(1.0625rem, 1.25vw, 1.1875rem);
    color: #64748B;
    max-width: 480px;
    margin: 0 auto;
    line-height: 1.75;
    font-weight: 400;
    letter-spacing: -0.01em;
}

/* Main Visualization Canvas - Asymmetric Editorial Layout */
.context-web-canvas {
    position: relative;
    width: 100%;
    display: grid;
    grid-template-columns: 1fr 1.2fr 1fr;
    align-items: center;
    gap: clamp(2rem, 4vw, 4rem);
    min-height: 420px;
}

/* Data Source Nodes (Left Column) */
.data-sources-column {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: flex-end;
}

/* Clean, minimal source nodes */
.source-node {
    display: flex;
    align-items: center;
    gap: 0.875rem;
    padding: 0.75rem 1.25rem;
    background: #FAFBFC;
    border: 1px solid #F1F5F9;
    border-radius: 100px;
    opacity: 0;
    transform: translateX(-20px);
    transition:
        opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1),
        transform 0.6s cubic-bezier(0.16, 1, 0.3, 1),
        background 0.25s ease,
        border-color 0.25s ease,
        box-shadow 0.25s ease;
    position: relative;
    cursor: default;
}

.source-node.visible {
    opacity: 1;
    transform: translateX(0);
}

.source-node.active {
    background: #FFFFFF;
    border-color: #E2E8F0;
    box-shadow: 0 2px 12px rgba(15, 23, 42, 0.08);
}

/* Staggered reveal with editorial timing */
.source-node:nth-child(1) { transition-delay: 0.1s; }
.source-node:nth-child(2) { transition-delay: 0.18s; }
.source-node:nth-child(3) { transition-delay: 0.26s; }
.source-node:nth-child(4) { transition-delay: 0.34s; }
.source-node:nth-child(5) { transition-delay: 0.42s; }
.source-node:nth-child(6) { transition-delay: 0.5s; }

/* Refined hover - subtle elevation */
.source-node:hover {
    background: #FFFFFF;
    border-color: #E2E8F0;
    box-shadow: 0 4px 20px rgba(15, 23, 42, 0.1);
    transform: translateX(4px);
}

.source-icon-wrapper {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

/* Refined icon sizing */
.source-icon {
    width: 24px;
    height: 24px;
    object-fit: contain;
    transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

.source-node:hover .source-icon {
    transform: scale(1.1);
}

.source-label {
    font-size: 0.9375rem;
    font-weight: 500;
    color: #334155;
    letter-spacing: -0.015em;
    transition: color 0.25s ease;
}

.source-node:hover .source-label {
    color: #0F172A;
}

.source-node.active .source-label {
    color: #0F172A;
}

/* Frank Node (Center) - Editorial Focal Point */
.frank-node-container {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 320px;
}

/* Refined particle system */
.particle-container {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 2;
    overflow: hidden;
}

.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: #3B82F6;
    border-radius: 50%;
    box-shadow: 0 0 8px rgba(59, 130, 246, 0.6);
    opacity: 0;
    pointer-events: none;
}

.particle.flowing {
    animation: particleFlow var(--flow-duration, 1.8s) cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes particleFlow {
    0% {
        opacity: 0;
        transform: translate(var(--start-x), var(--start-y)) scale(0);
    }
    20% {
        opacity: 0.8;
        transform: translate(var(--start-x), var(--start-y)) scale(1);
    }
    80% {
        opacity: 0.8;
        transform: translate(var(--end-x), var(--end-y)) scale(1);
    }
    100% {
        opacity: 0;
        transform: translate(var(--end-x), var(--end-y)) scale(0);
    }
}

/* Central Frank Node - Clean and refined */
.frank-node {
    position: relative;
    z-index: 10;
}

.frank-node-inner {
    position: relative;
    width: 160px;
    height: 160px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Elegant thin rings */
.frank-node-ring {
    position: absolute;
    border-radius: 50%;
    border: 1px solid #E2E8F0;
    opacity: 0;
    transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1);
}

.frank-ring-1 {
    inset: -24px;
    animation: ringPulse 4s ease-in-out infinite;
    animation-delay: 0s;
}

.frank-ring-2 {
    inset: -48px;
    animation: ringPulse 4s ease-in-out infinite;
    animation-delay: 1.33s;
}

.frank-ring-3 {
    inset: -72px;
    animation: ringPulse 4s ease-in-out infinite;
    animation-delay: 2.66s;
}

.context-web-section.processing .frank-node-ring {
    opacity: 1;
}

@keyframes ringPulse {
    0%, 100% {
        opacity: 0.4;
        transform: scale(1);
    }
    50% {
        opacity: 0.8;
        transform: scale(1.02);
    }
}

/* Frank core - premium solid appearance */
.frank-core {
    width: 110px;
    height: 110px;
    background: linear-gradient(145deg, #3B82F6 0%, #2563EB 100%);
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 6px;
    box-shadow:
        0 20px 50px -12px rgba(37, 99, 235, 0.4),
        0 8px 24px -8px rgba(37, 99, 235, 0.3);
    transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1), box-shadow 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}

.context-web-section.processing .frank-core {
    transform: scale(1.05);
    box-shadow:
        0 24px 60px -12px rgba(37, 99, 235, 0.5),
        0 12px 32px -8px rgba(37, 99, 235, 0.4);
}

.frank-avatar {
    width: 54px;
    height: 54px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid rgba(255, 255, 255, 0.4);
}

.frank-label {
    font-size: 0.6875rem;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.95);
    text-transform: uppercase;
    letter-spacing: 0.15em;
}

/* Subtle pulse effect */
.frank-pulse {
    position: absolute;
    inset: -8px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%);
    opacity: 0;
    pointer-events: none;
}

.context-web-section.processing .frank-pulse {
    animation: frankPulse 2.5s ease-out infinite;
}

@keyframes frankPulse {
    0% {
        transform: scale(1);
        opacity: 0.5;
    }
    100% {
        transform: scale(1.8);
        opacity: 0;
    }
}

/* Profile Nodes (Right Column) - Rolling Profile Display */
.profile-nodes-column {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
}

/* Rolling Profile Container - Premium Card Design */
.rolling-profile-container {
    position: relative;
    width: 100%;
    height: 480px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.rolling-profile {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    padding: 1.5rem 1.5rem 2rem;
    background: #FFFFFF;
    border: 1px solid rgba(15, 23, 42, 0.06);
    border-radius: 24px;
    position: absolute;
    opacity: 0;
    transform: translateY(30px) scale(0.94);
    transition:
        opacity 0.7s cubic-bezier(0.16, 1, 0.3, 1),
        transform 0.7s cubic-bezier(0.16, 1, 0.3, 1),
        box-shadow 0.5s ease,
        border-color 0.4s ease;
    cursor: default;
    box-shadow:
        0 2px 8px rgba(15, 23, 42, 0.04),
        0 8px 24px rgba(15, 23, 42, 0.06);
}

.rolling-profile.active {
    position: relative;
    opacity: 1;
    transform: translateY(0) scale(1);
    border-color: rgba(59, 130, 246, 0.2);
    box-shadow:
        0 4px 12px rgba(59, 130, 246, 0.06),
        0 24px 70px rgba(15, 23, 42, 0.14);
}

.rolling-profile.exiting {
    opacity: 0;
    transform: translateY(-30px) scale(0.94);
}

.profile-avatar-wrapper {
    width: 220px;
    height: 290px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    overflow: hidden;
    position: relative;
    box-shadow:
        0 4px 12px rgba(15, 23, 42, 0.1),
        0 16px 40px rgba(15, 23, 42, 0.1);
}

.profile-avatar-wrapper::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 16px;
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.06);
    pointer-events: none;
}

.rolling-profile.active .profile-avatar-wrapper {
    box-shadow:
        0 8px 24px rgba(15, 23, 42, 0.12),
        0 32px 64px rgba(15, 23, 42, 0.16);
}

.profile-avatar {
    width: 100%;
    height: 100%;
    border-radius: 16px;
    object-fit: cover;
    border: none;
    transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
}

.rolling-profile.active .profile-avatar {
    transform: scale(1.03);
}

.profile-name {
    font-family: var(--font-display);
    font-size: 1.375rem;
    font-weight: 700;
    color: #0F172A;
    letter-spacing: -0.04em;
    text-align: center;
    margin-top: 0.5rem;
}

.profile-label {
    font-size: 0.875rem;
    font-weight: 500;
    color: #475569;
    letter-spacing: -0.01em;
    text-align: center;
    max-width: 240px;
    line-height: 1.5;
    font-style: italic;
}

/* Progress Indicator - Editorial minimal style */
.context-web-progress {
    width: 100%;
    max-width: 480px;
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.4s, transform 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.4s;
}

.context-web-section.in-view .context-web-progress {
    opacity: 1;
    transform: translateY(0);
}

.progress-track {
    height: 2px;
    background: #F1F5F9;
    border-radius: 1px;
    overflow: hidden;
    margin-bottom: 1rem;
}

.progress-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #3B82F6 0%, #60A5FA 100%);
    border-radius: 1px;
    transition: width 0.15s linear;
}

.progress-labels {
    display: flex;
    justify-content: space-between;
}

.progress-label {
    font-size: 0.6875rem;
    color: #94A3B8;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-weight: 500;
}

/* ==================== CONTEXT WEB RESPONSIVE ==================== */

@media (max-width: 900px) {
    .context-web-canvas {
        grid-template-columns: 1fr 1.3fr 1fr;
        gap: 1.5rem;
    }

    .source-node,
    .profile-node {
        padding: 0.625rem 1rem;
    }

    .source-icon-wrapper {
        width: 28px;
        height: 28px;
    }

    .source-icon {
        width: 20px;
        height: 20px;
    }

    .frank-node-inner {
        width: 140px;
        height: 140px;
    }

    .frank-core {
        width: 90px;
        height: 90px;
    }

    .frank-avatar {
        width: 46px;
        height: 46px;
    }

    .frank-ring-1 { inset: -20px; }
    .frank-ring-2 { inset: -40px; }
    .frank-ring-3 { inset: -60px; }
}

@media (max-width: 768px) {
    .context-web-section {
        min-height: auto;
        padding: clamp(3rem, 6vh, 5rem) var(--space-md);
    }

    .context-web-section::before {
        display: none;
    }

    .context-web-canvas {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto;
        gap: 2rem;
    }

    .data-sources-column {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        order: 1;
        gap: 0.5rem;
    }

    .frank-node-container {
        order: 2;
        min-height: 220px;
    }

    .profile-nodes-column {
        justify-content: center;
        align-items: center;
        order: 3;
    }

    .rolling-profile-container {
        height: 420px;
    }

    .source-node {
        padding: 0.5rem 0.875rem;
        border-radius: 100px;
        transform: translateY(-16px);
    }

    .source-node.visible {
        transform: translateY(0);
    }

    .source-node:hover {
        transform: translateY(0);
    }

    .rolling-profile {
        padding: 1.25rem 1.25rem 1.5rem;
    }

    .profile-avatar-wrapper {
        width: 180px;
        height: 235px;
    }

    .source-label {
        font-size: 0.8125rem;
    }

    .profile-name {
        font-size: 1.125rem;
    }

    .profile-label {
        font-size: 0.8125rem;
    }

    .frank-node-inner {
        width: 130px;
        height: 130px;
    }

    .frank-core {
        width: 85px;
        height: 85px;
    }

    .frank-ring-1 { inset: -18px; }
    .frank-ring-2 { inset: -36px; }
    .frank-ring-3 { inset: -54px; }
}

@media (max-width: 480px) {
    .context-web-title {
        font-size: 1.75rem;
    }

    .context-web-subtitle {
        font-size: 0.9375rem;
    }

    .data-sources-column {
        gap: 0.375rem;
    }

    .source-node {
        padding: 0.4375rem 0.75rem;
    }

    .source-icon-wrapper {
        width: 26px;
        height: 26px;
    }

    .source-icon {
        width: 18px;
        height: 18px;
    }

    .rolling-profile-container {
        height: 360px;
    }

    .rolling-profile {
        padding: 1rem 1rem 1.25rem;
        gap: 0.625rem;
    }

    .profile-avatar-wrapper {
        width: 150px;
        height: 195px;
        border-radius: 12px;
    }

    .profile-avatar {
        border-radius: 12px;
    }

    .profile-name {
        font-size: 1rem;
    }

    .profile-label {
        font-size: 0.75rem;
        max-width: 180px;
    }

    .source-label {
        font-size: 0.75rem;
    }

    .frank-node-inner {
        width: 110px;
        height: 110px;
    }

    .frank-core {
        width: 70px;
        height: 70px;
    }

    .frank-avatar {
        width: 36px;
        height: 36px;
    }

    .frank-label {
        font-size: 0.5625rem;
    }

    .frank-ring-1 { inset: -14px; }
    .frank-ring-2 { inset: -28px; }
    .frank-ring-3 { inset: -42px; }
}

/* ==================== REDUCED MOTION ==================== */
@media (prefers-reduced-motion: reduce) {
    .context-web-header,
    .source-node,
    .rolling-profile,
    .context-web-progress {
        transition: opacity 0.3s ease;
    }

    .source-node,
    .source-node.visible,
    .rolling-profile,
    .rolling-profile.active {
        transform: none;
    }

    .frank-node-ring,
    .frank-pulse,
    .particle {
        animation: none !important;
    }

    .progress-fill {
        transition: width 0.3s ease;
    }

    .context-web-section.processing .frank-node-ring {
        opacity: 0.6;
    }

    .context-web-section.processing .frank-pulse {
        opacity: 0;
    }
}
